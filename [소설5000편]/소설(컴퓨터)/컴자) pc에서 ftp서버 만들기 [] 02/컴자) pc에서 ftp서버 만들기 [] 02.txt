
『파워 유저 동호회-네트워크 (go PUG)』 505번
 제  목:[강좌] PC에서 ftp서버 만들기 2/2                            
 올린이:apt2848 (복성현  )    98/06/19 18:50    읽음:530 관련자료 없음
 -----------------------------------------------------------------------------

이렇게 파일에 대한 설정을 한 후에 암호를 설정해야 하지만 앞서 
anonymous 사용자의 암호 체크를 설정했다면 자동으로 메일 주소를
묻도록 되어 있으므로 암호에 대한 설정을 하지 않아도 된다. 이렇게
설정을 마쳤으면 Store 버튼을 눌러 추가한다. 다음은 일반 사용자를
설정해야 하는데 모든 과정은 위의 anonymous 사용자와 동일하고  암
호만 설정한다. 물론 홈 디렉토리에 대한 설정도 해야 한다. 그리고 
Group name이 있는데 이는 여러 사용자가 있을 때 일일이 설정할 필요
없이 그룹별로 묶어서 관리할 경우 이 항목에 그룹 이름을 입력한다.
이 그룹 이름은 Setup 메뉴 Groups 항목에서 만들어준다.

그룹 이름을 만드는 과정과 화면은 사용자를 설정하는 그것과 동일
하다. 단지 User name 항목이 비어 있다는 점만 빼놓고 말이다. Group
name에 이름을 입력하고 해당 그룹에 대한 설정을 사용자 등록과 동일
하게 한다. 이렇게 설정된 Group은 앞서 본 사용자 등록시에 이용된다.
즉 Group name 항목에 등록한 그룹 이름을 입력하면 자동적으로 Group
에 설정된 내용이 그대로 해당 사용자에 반영된다. 물론 암호를 각기 
다른 것으로 설정하는 것이 보안을 위해 좋다.

화면 3. 설정한 Group을 사용자 등록시에 이용할 수 있다.

좀더 세밀한 사용자 설정하기
사용자 설정과 그룹 설정 대화상자를 보면 이외에도 다른 버튼들이 
있음을 알 수 있어 Misc 버튼을 누르면 기타 추가 설정에 대한 
대화상자가 나타난다. 이 설정은 프로그램 화면 왼쪽에 위치한 
사용자나 그룹에 대한 설정이다. 즉 anonymous 를 선택하고 이 버튼을
누르면 이 사용자일 경우에만 해당 설정 사항이 적용된다. 
먼저 Disable account 를 설정하면 해당 사용자나 그룹을 일시적으로
사용하지 못하도록 할 수 있다. 그리고 Show path relative to homedir
를 설정하면 홈 디렉토리로 설정된  위치로부터 사용자에게 보여준다.
만약 c:\users 라고 홈 디렉토리로 만들었다고 가정하자. 그런데 이 
설정이 되어 있지 않으면 사용자가 로그인했을 때 이 디렉토리 경로를
모두 볼 수 있다. 그러나 이 설정을 하면 유닉스의 루트디렉토리인 
“/”가 c:\users 가 되어서 실제 로그인을 한 경우에는  “/” 디렉
토리만 보게 된다. 예를 들어 c:\users\uploads 라는 디렉토리가 
있다면 이 디렉토리를 홈 디렉토리로 사용하는 모든 사용자는 /uploads
만을 보게 된다.
Hide ‘hidden’ files 를 선택하면 숨김 속성이 있는 파일을 볼 수 
없으며 Always allow login, no time-out 항목은 로그인하면 무한정으로
접속을 유지할 수 있도록 하는 설정이다. 마지막에 있는 항목은 특정한
IP 번호를 갖고 있는 컴퓨터에서 서버에 로그인한 경우 접속할 수 
있도록 하는 설정이다.
유닉스는 한 사용자 아이디를 가지고 여러 사람이 로그인을 할 수 
있는데, 특히 anonymous 의 경우는 앞서 서버 셋팅에 따라 달라진다.
그러므로 이 설정을 해서 완벽하게 서버에 로그인하는 사용자를 제한
하는 경우에 유용하게 사용할 수 있다. 이 설정에서 선택을 권장할 
만한 항목은 Show path relative to homedir 와 Hide ‘hidden’files
이다. 이 설정은 유닉스 같은 FTP 서버 처럼 보여질 수 있으므로 보안
이나 다른 문제를 발생시킬 소지를 조금이나마 줄일 수 있다고 본다.

Max. speed 는 앞서 서버 설정에서 했다면 빈 칸으로 두어도 되면 
만약 이곳에 입력하면 해당 값으로 다운로드 속도를 제한한다. 많은
사용자가 몰리면 이 다운로드 속도를 제한할 필요가 있다. 너무 높은
속도로 여러 명이 동시에 다운로드하면 네트워크에 이상이 있을 수도
있기 때문이다. Login message file 은 처음 접속할 경우 환영 메시지
를 출력하는 것으로서 단순한 텍스트 파일을 하나 만들고 해당 파일이
있는 경로와 파일 이름을 입력해주면 된다. 이 텍스트는 간단한  매크
로를 넣어 재미있게 꾸밀 수 있는데 매크로는 %로 시작한다.가령 예를
들어 Hello %name from %IP 라고 텍스트를 만들면 컴퓨터 IP 번호가 
192.168.1.1이고 user 라는 사용자로 로그인한 경우 Hello user from 
192.168.1.1 이라는 메시지가 로그인이 끝나고 첫 화면에 나타난다.

화면 4. User/Group Upload/Download Ratio 대화상자

U/D 버튼은 업로드/다운로드 비율을 설정하도록 하는데 이 설정은 특정 
사용자가 파일을 업로드하지 않고 얌체같이(?) 파일만 다운로드하지 못
하도록 할 때 이용한다. 즉 몇 번 이상 업로드를 해야 다운로드할 수 
있도록 설정하는 것이다. 설정할 수 있는 항목은 이 업로드 파일을 
세션당 정하거나 아니면 파일 크기 및 개수로 조정할 수 있으므로 맘에
드는 설정을 선택한다. 그리고 Ratio 항목에서 Uploads/Downloads 비율
을 정확히 설정하면 해당 사용자에 대한 U/D 설정이 된다. 물론 현재 
사용자가 이 규칙을 얼마나 잘 이행하고 있나를 확인하려면 
Preset/Current 부분을 보면 확인할 수 있다.

유닉스는 사용자별로 홈 디렉토리를 설정할 수 있으며 이 디렉토리 
공간을 제한할 수 있다. 이를 쿼터(Quota)라고 하는데 참고로 윈도우
NT는 FTP 서비스를 하더라도 이러한 쿼터 기능은 없다. Serv-U에서 
설정하는 쿼터는 유닉스의 그것과 동일하다. 설정을 하게 되면 
Maximum 에 설정된 공간 이상 사용할 수 없다. 이 기능은 여러 사용자
마다 자신의 홈 디렉토리를 할당하여 사용할 때 아주 유용하다. 사용자
설정을 마치면 일단 간단하게 FTP 서버로서 사용할 수 있다. 그러나 
왠지 부드럽지 못한 느낌이 든다. 조금 더 세밀하게 설정하는 방법을 
보도록 하자.

먼저 처음 서버에 접속할 때 나오는 메시지를 만들어보자. 이 설정은
Setup 메뉴에서 Sign on/Sign off에서 하는데 이 메뉴를 선택하면 두
개의 입력창으로 나누어진 대화상자가 열린다. 위의 Signon message는
처음 서버에 접속할 때 나오는 메시지를 입력하는 부분이고 Signoff 
message 는 서버와 접속을 끝낼 때 나오는 메시지이다. 
앞서본 Login message file 과 다른 점은 먼저 이 메시지는 처음 접
속을 한 후 특정 사용자로 로그인한 후에 나오는 메시지이고
이 Signon은 무조건 서버에 접속한 경우에 나오는 메시지이다. 그러나
사용하는 매크로는 동일하다.

화면 5. Setup Sign on/Sign off Text 대화상자

사용자 관리 툴에 대해서
사실 FTP 서버만을 만들어 자신만 이용하는 경우에는 사용자 관리를
할 필요가 없다. 그러나 완전한 FTP 서버를 사용한다면 사용자 관리를
해야 한다. 더구나 누가 무슨 일을 자기 PC에서 하고 있는지 알아야 
할 필요가 있다. 이럴 때를 대비에서 Serv-U는 편리한 사용자 관리 
도구를 갖고 있다.

File 메뉴에서 User Info를 선택하면 창이 열리는데 이곳에는 현재 
접속하고 있는 사용자에 대한 정보를 보여주고 무슨 일을 하고 
있는지 알 수 있다. 

그리고 접속한 사용자가 무슨 일을 하고 있는지를 정확히 보려면
Spy on User 버튼을 누른다. 이 창을 보면 선택한 사용자가 무슨
작업을 하고 있는지를 정확히 알 수 있다. 왜냐하면 입력한 명령
어는 물론 출력 메시지까지 모두 보여주기 때문이다. 그런데 이렇게
작업을 하고 있는 사용자가 조금 의심스러운 행동을 하고 있다면 어
떻게 해야 할까? 물론 Serv-U를 종료했다가 다시 시작하면 되지만 
이렇게 황당한 방법보다는 아예 해당 사용자와 접속을 끊게 하는 
것이 더 신사답지 않을까? 이렇게 하려면 해당 사용자를 선택하고 
Kill User 버튼을 누르면 해당 사용자와 접속이 끊긴다.

설정을 모두 마쳤으면 다른 서버에서 Serv-U가 설치된 서버에 ftp
로그인을 해보자. 다음 화면은 넷텀으로 FTP 서버에 접속한 화면
이다. 마치 유닉스 FTP 서버와 같다. 이 정도면 인터넷에 공개해서
자신만의 FTP 서버를 갖는 것도 나름대로 기쁨이 있지 않을까? 

사용되는 매크로
★ Time/date
* %Time : 현재 시간 출력
* %Date : 현재 날짜 출력

★ Server statistics
* %UNow : 현재 서버에 접속되어 있는 사용자 수
* %UAll : 서버가 시작한 후 현재까지 총 사용자 수

* %U24h : 24시간 이내 사용자 수
* %ServerDays : 서버가 동작한 후 지난 날짜
* %ServerHours : 서버가 동작한 후 지난 시간
* %ServerMins : 서버가 동작한 후 지난 시간(분 단위)
* %ServerSecs : 서버가 동작한 후 지난 시간(초 단위)
* %ServerKbUp : 서버가 시작한 후 업로드된 파일 크기수
 (킬로바이트 단위)
* %ServerKbDown : 서버가 시작한 후 다운로드된 파일 크기수
  (킬로바이트 단위)
* %ServerFilesUp : 서버가 시작한 후 업로드된 파일 수
* %ServerFilesDown : 서버가 시작한 후 다운로드된 파일 수

★ Server settings
* %MaxUsers  : 서버에 접속할 수 있는 최대 사용자수
* %MaxAnonymous : 서버에 접속할 수 있는 최대  anonymous 
  사용자 수

팁

 암호를 잊어버렸을 때

마이크로소프트 네트워크를 설치한 윈도우 95는 시작할 때 로그온하는
대화상자가 나타난다. 그런데 암호를 잊어버렸다면 단순히 esc 버튼을
누르거나 취소 버튼을 선택한다. 그러면 바로 윈도우 95가 시작된다. 
그러나 LAN이 구성된 환경이라면 마이크로소프트 네트워크를 
로그온하지 못하면 다른 컴퓨터의 자원을 사용할 수 없게 된다. 이런
경우 반드시 로그온을 해야 한다. 윈도우 95의 시스템 디렉토리에 
확장자가 pwl인 파일이 있다. 파일 이름은 로그온하는 사용자 이름인
경우가 대부분이다. 이 파일을 찾아 삭제해버리고 다시 부팅을 하고
사용자와 암호를 다시 설정하면 된다.  단축 메뉴의 ‘파일 보내기’
기능 이용하기 탐색기에서나 바탕화면에서 아이콘을 오른쪽 마우스 
버튼으로 누르면 단축 메뉴에서 파일 보내기 항목이 있음을 알 수 있다.
이 기능을 이용하면 파일 관리가 쉬워진다.

예를 들어 통신에 보면 파일과 함께 파일을 설명한 문서가 같이 들어
있는 경우가 많다. 그러나 확장자가 txt가 아니라면 메모장을 열고 그
메모장에서 해당 파일을 읽어야 한다. 그렇다고 새로운 파일 형식으로
윈도우에 등록하는 것도 그렇게 시원한 해결책은 아닌 듯싶다. 이때 
파일 보내기를 이용해보자. 단축 메뉴의 파일 보내기에 있는 것들은 
모두 윈도우 시스템 폴더의 SendTo 폴더에 들어 있다. 즉 이 폴더에 
앞서 예를 든 상황에서 메모장의 단축 아이콘을 넣으면 간단하게
파일을 선택하면서 곧바로 메모장을 실행할 수 있다. 

                                                         액톤코리아
                                                www.dual.dnet.co.kr
